#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# è‡ªåŠ¨æ›´æ–°æ—¥å¿—è„šæœ¬
echo "ğŸ”„ æ­£åœ¨æ›´æ–°é¡¹ç›®æ—¥å¿—..."

# è·å–æœ€æ–°çš„æäº¤ä¿¡æ¯
COMMIT_HASH=$(git rev-parse --short HEAD)
COMMIT_MSG=$(git log -1 --pretty=format:"%s")
BRANCH=$(git branch --show-current)
DATE=$(date +"%Y-%m-%d")
AUTHOR=$(git log -1 --pretty=format:"%an")

# è¿è¡Œæ›´æ–°æ—¥å¿—è„šæœ¬
node scripts/update-log.mjs "$DATE" "$COMMIT_HASH" "$BRANCH" "$COMMIT_MSG" "$AUTHOR"

echo "âœ… æ—¥å¿—æ›´æ–°å®Œæˆï¼"
